#!/bin/sh

cmd=`docker container ls | grep notifications-php`
status=$?
if [ $status = 0 ]
then
docker exec \
    -ti \
    -e APP_ENV=test \
    notifications-php php -d memory_limit=512M $@
else
## execution de PHP de mani√®re autonome (pas besoin d'un environnement de containers)
docker run \
    --init \
    --rm \
    -ti \
    --name php-notifications-running-script \
    -v "$(pwd)/bin/docker/php/php.ini:/usr/local/etc/php/php.ini" \
    -v "$PWD":"$PWD" \
    --user 1000:1000 \
    -w "$PWD" \
    notifications-php php -d memory_limit=512M $@
fi

